#!/bin/sh
[ "$engine" = metapost ] && exit
if printenv lastpagenumber >/dev/null; then
  if printenv p >/dev/null; then
    pages=`( seq $((lastpagenumber+1)) $total; seq 1 $lastpagenumber ) | paste -sd, | dvipdfmx-select.pl $p | dvipdfmx-compress.pl`
  else
    pages=$((lastpagenumber+1))-,-$lastpagenumber
  fi
else
  if printenv p >/dev/null; then
    pages=$p 
  else
    pages=-
  fi
fi
/bin/dvipdfmx -s $pages "$@"
ret=$?
eval rm \${$#}
exit $ret
